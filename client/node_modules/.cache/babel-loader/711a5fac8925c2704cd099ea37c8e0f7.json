{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.getBabelError = getBabelError;\n\nvar _chalk = _interopRequireDefault(require(\"chalk\"));\n\nvar _simpleWebpackError = require(\"./simpleWebpackError\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nconst chalk = new _chalk.default.constructor({\n  enabled: true\n});\n\nfunction getBabelError(fileName, err) {\n  if (err.code !== 'BABEL_PARSE_ERROR') {\n    return false;\n  } // https://github.com/babel/babel/blob/34693d6024da3f026534dd8d569f97ac0109602e/packages/babel-core/src/parser/index.js\n\n\n  if (err.loc) {\n    const lineNumber = Math.max(1, err.loc.line);\n    const column = Math.max(1, err.loc.column);\n    let message = err.message // Remove file information, which instead is provided by webpack.\n    .replace(/^.+?: /, '') // Remove column information from message\n    .replace(new RegExp(`[^\\\\S\\\\r\\\\n]*\\\\(${lineNumber}:${column}\\\\)[^\\\\S\\\\r\\\\n]*`), '');\n    return new _simpleWebpackError.SimpleWebpackError(`${chalk.cyan(fileName)}:${chalk.yellow(lineNumber.toString())}:${chalk.yellow(column.toString())}`, chalk.red.bold('Syntax error').concat(`: ${message}`));\n  }\n\n  return false;\n}","map":{"version":3,"sources":["../../../../../build/webpack/plugins/wellknown-errors-plugin/parseBabel.ts"],"names":["chalk","Chalk","enabled","err","lineNumber","Math","column","message","SimpleWebpackError"],"mappings":";;;;;AAAA,IAAA,MAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AACA,IAAA,mBAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;;;;;;AAEA;;AAAA,MAAMA,KAAK,GAAG,IAAIC,MAAAA,CAAAA,OAAAA,CAAJ,WAAA,CAAsB;AAAEC,EAAAA,OAAO,EAA7C;AAAoC,CAAtB,CAAd;;AAEO,SAAA,aAAA,CAAA,QAAA,EAAA,GAAA,EAMuB;AAC5B,MAAIC,GAAG,CAAHA,IAAAA,KAAJ,mBAAA,EAAsC;AACpC,WAAA,KAAA;AAGF,GAL4B,CAK5B;;;AACA,MAAIA,GAAG,CAAP,GAAA,EAAa;AACX,UAAMC,UAAU,GAAGC,IAAI,CAAJA,GAAAA,CAAAA,CAAAA,EAAYF,GAAG,CAAHA,GAAAA,CAA/B,IAAmBE,CAAnB;AACA,UAAMC,MAAM,GAAGD,IAAI,CAAJA,GAAAA,CAAAA,CAAAA,EAAYF,GAAG,CAAHA,GAAAA,CAA3B,MAAeE,CAAf;AAEA,QAAIE,OAAO,GAAG,GAAG,CAACA,OAAJ,CACZ;AADY,KAAA,OAAA,CAAA,QAAA,EAAA,EAAA,EAGZ;AAHY,KAAA,OAAA,CAKV,IAAA,MAAA,CAAY,mBAAkBH,UAAW,IAAGE,MALlC,kBAKV,CALU,EAAd,EAAc,CAAd;AASA,WAAO,IAAIE,mBAAAA,CAAJ,kBAAA,CACJ,GAAER,KAAK,CAALA,IAAAA,CAAAA,QAAAA,CAAqB,IAAGA,KAAK,CAALA,MAAAA,CACzBI,UAAU,CADeJ,QACzBI,EADyBJ,CAEzB,IAAGA,KAAK,CAALA,MAAAA,CAAaM,MAAM,CAAnBN,QAAaM,EAAbN,CAHA,EAAA,EAILA,KAAK,CAALA,GAAAA,CAAAA,IAAAA,CAAAA,cAAAA,EAAAA,MAAAA,CAAuC,KAAIO,OAJ7C,EAIEP,CAJK,CAAP;AAQF;;AAAA,SAAA,KAAA;AACD","sourcesContent":["import Chalk from 'chalk'\nimport { SimpleWebpackError } from './simpleWebpackError'\n\nconst chalk = new Chalk.constructor({ enabled: true })\n\nexport function getBabelError(\n  fileName: string,\n  err: Error & {\n    code?: 'BABEL_PARSE_ERROR'\n    loc?: { line: number; column: number }\n  }\n): SimpleWebpackError | false {\n  if (err.code !== 'BABEL_PARSE_ERROR') {\n    return false\n  }\n\n  // https://github.com/babel/babel/blob/34693d6024da3f026534dd8d569f97ac0109602e/packages/babel-core/src/parser/index.js\n  if (err.loc) {\n    const lineNumber = Math.max(1, err.loc.line)\n    const column = Math.max(1, err.loc.column)\n\n    let message = err.message\n      // Remove file information, which instead is provided by webpack.\n      .replace(/^.+?: /, '')\n      // Remove column information from message\n      .replace(\n        new RegExp(`[^\\\\S\\\\r\\\\n]*\\\\(${lineNumber}:${column}\\\\)[^\\\\S\\\\r\\\\n]*`),\n        ''\n      )\n\n    return new SimpleWebpackError(\n      `${chalk.cyan(fileName)}:${chalk.yellow(\n        lineNumber.toString()\n      )}:${chalk.yellow(column.toString())}`,\n      chalk.red.bold('Syntax error').concat(`: ${message}`)\n    )\n  }\n\n  return false\n}\n"]},"metadata":{},"sourceType":"script"}