{"ast":null,"code":"'use strict';\n\nlet {\n  fileURLToPath,\n  pathToFileURL\n} = require('url');\n\nlet {\n  resolve,\n  isAbsolute\n} = require('path');\n\nlet {\n  nanoid\n} = require('nanoid/non-secure');\n\nlet lineColumn = require('line-column');\n\nlet terminalHighlight = require('./terminal-highlight');\n\nlet CssSyntaxError = require('./css-syntax-error');\n\nlet PreviousMap = require('./previous-map');\n\nclass Input {\n  constructor(css, opts = {}) {\n    if (css === null || typeof css === 'undefined' || typeof css === 'object' && !css.toString) {\n      throw new Error(`PostCSS received ${css} instead of CSS string`);\n    }\n\n    this.css = css.toString();\n\n    if (this.css[0] === '\\uFEFF' || this.css[0] === '\\uFFFE') {\n      this.hasBOM = true;\n      this.css = this.css.slice(1);\n    } else {\n      this.hasBOM = false;\n    }\n\n    if (opts.from) {\n      if (/^\\w+:\\/\\//.test(opts.from) || isAbsolute(opts.from)) {\n        this.file = opts.from;\n      } else {\n        this.file = resolve(opts.from);\n      }\n    }\n\n    let map = new PreviousMap(this.css, opts);\n\n    if (map.text) {\n      this.map = map;\n      let file = map.consumer().file;\n      if (!this.file && file) this.file = this.mapResolve(file);\n    }\n\n    if (!this.file) {\n      this.id = '<input css ' + nanoid(6) + '>';\n    }\n\n    if (this.map) this.map.file = this.from;\n  }\n\n  fromOffset(offset) {\n    let finder = lineColumn(this.css);\n\n    this.fromOffset = i => finder.fromIndex(i);\n\n    return this.fromOffset(offset);\n  }\n\n  error(message, line, column, opts = {}) {\n    let result;\n\n    if (!column) {\n      let pos = this.fromOffset(line);\n      line = pos.line;\n      column = pos.col;\n    }\n\n    let origin = this.origin(line, column);\n\n    if (origin) {\n      result = new CssSyntaxError(message, origin.line, origin.column, origin.source, origin.file, opts.plugin);\n    } else {\n      result = new CssSyntaxError(message, line, column, this.css, this.file, opts.plugin);\n    }\n\n    result.input = {\n      line,\n      column,\n      source: this.css\n    };\n\n    if (this.file) {\n      result.input.url = pathToFileURL(this.file).toString();\n      result.input.file = this.file;\n    }\n\n    return result;\n  }\n\n  origin(line, column) {\n    if (!this.map) return false;\n    let consumer = this.map.consumer();\n    let from = consumer.originalPositionFor({\n      line,\n      column\n    });\n    if (!from.source) return false;\n    let fromUrl;\n\n    if (isAbsolute(from.source)) {\n      fromUrl = pathToFileURL(from.source);\n    } else {\n      fromUrl = new URL(from.source, this.map.consumer().sourceRoot || pathToFileURL(this.map.mapFile));\n    }\n\n    let result = {\n      url: fromUrl.toString(),\n      line: from.line,\n      column: from.column\n    };\n\n    if (fromUrl.protocol === 'file:') {\n      result.file = fileURLToPath(fromUrl);\n    }\n\n    let source = consumer.sourceContentFor(from.source);\n    if (source) result.source = source;\n    return result;\n  }\n\n  mapResolve(file) {\n    if (/^\\w+:\\/\\//.test(file)) {\n      return file;\n    }\n\n    return resolve(this.map.consumer().sourceRoot || this.map.root || '.', file);\n  }\n\n  get from() {\n    return this.file || this.id;\n  }\n\n}\n\nmodule.exports = Input;\nInput.default = Input;\n\nif (terminalHighlight && terminalHighlight.registerInput) {\n  terminalHighlight.registerInput(Input);\n}","map":{"version":3,"sources":["/Users/bruceseymour/ra-video/client/node_modules/next/node_modules/postcss/lib/input.js"],"names":["fileURLToPath","pathToFileURL","require","resolve","isAbsolute","nanoid","lineColumn","terminalHighlight","CssSyntaxError","PreviousMap","Input","constructor","css","opts","toString","Error","hasBOM","slice","from","test","file","map","text","consumer","mapResolve","id","fromOffset","offset","finder","i","fromIndex","error","message","line","column","result","pos","col","origin","source","plugin","input","url","originalPositionFor","fromUrl","URL","sourceRoot","mapFile","protocol","sourceContentFor","root","module","exports","default","registerInput"],"mappings":"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","sourcesContent":["'use strict'\n\nlet { fileURLToPath, pathToFileURL } = require('url')\nlet { resolve, isAbsolute } = require('path')\nlet { nanoid } = require('nanoid/non-secure')\nlet lineColumn = require('line-column')\n\nlet terminalHighlight = require('./terminal-highlight')\nlet CssSyntaxError = require('./css-syntax-error')\nlet PreviousMap = require('./previous-map')\n\nclass Input {\n  constructor (css, opts = {}) {\n    if (\n      css === null ||\n      typeof css === 'undefined' ||\n      (typeof css === 'object' && !css.toString)\n    ) {\n      throw new Error(`PostCSS received ${css} instead of CSS string`)\n    }\n\n    this.css = css.toString()\n\n    if (this.css[0] === '\\uFEFF' || this.css[0] === '\\uFFFE') {\n      this.hasBOM = true\n      this.css = this.css.slice(1)\n    } else {\n      this.hasBOM = false\n    }\n\n    if (opts.from) {\n      if (/^\\w+:\\/\\//.test(opts.from) || isAbsolute(opts.from)) {\n        this.file = opts.from\n      } else {\n        this.file = resolve(opts.from)\n      }\n    }\n\n    let map = new PreviousMap(this.css, opts)\n    if (map.text) {\n      this.map = map\n      let file = map.consumer().file\n      if (!this.file && file) this.file = this.mapResolve(file)\n    }\n\n    if (!this.file) {\n      this.id = '<input css ' + nanoid(6) + '>'\n    }\n    if (this.map) this.map.file = this.from\n  }\n\n  fromOffset (offset) {\n    let finder = lineColumn(this.css)\n    this.fromOffset = i => finder.fromIndex(i)\n    return this.fromOffset(offset)\n  }\n\n  error (message, line, column, opts = {}) {\n    let result\n    if (!column) {\n      let pos = this.fromOffset(line)\n      line = pos.line\n      column = pos.col\n    }\n    let origin = this.origin(line, column)\n    if (origin) {\n      result = new CssSyntaxError(\n        message,\n        origin.line,\n        origin.column,\n        origin.source,\n        origin.file,\n        opts.plugin\n      )\n    } else {\n      result = new CssSyntaxError(\n        message,\n        line,\n        column,\n        this.css,\n        this.file,\n        opts.plugin\n      )\n    }\n\n    result.input = { line, column, source: this.css }\n    if (this.file) {\n      result.input.url = pathToFileURL(this.file).toString()\n      result.input.file = this.file\n    }\n\n    return result\n  }\n\n  origin (line, column) {\n    if (!this.map) return false\n    let consumer = this.map.consumer()\n\n    let from = consumer.originalPositionFor({ line, column })\n    if (!from.source) return false\n\n    let fromUrl\n\n    if (isAbsolute(from.source)) {\n      fromUrl = pathToFileURL(from.source)\n    } else {\n      fromUrl = new URL(\n        from.source,\n        this.map.consumer().sourceRoot || pathToFileURL(this.map.mapFile)\n      )\n    }\n\n    let result = {\n      url: fromUrl.toString(),\n      line: from.line,\n      column: from.column\n    }\n\n    if (fromUrl.protocol === 'file:') {\n      result.file = fileURLToPath(fromUrl)\n    }\n\n    let source = consumer.sourceContentFor(from.source)\n    if (source) result.source = source\n\n    return result\n  }\n\n  mapResolve (file) {\n    if (/^\\w+:\\/\\//.test(file)) {\n      return file\n    }\n    return resolve(this.map.consumer().sourceRoot || this.map.root || '.', file)\n  }\n\n  get from () {\n    return this.file || this.id\n  }\n}\n\nmodule.exports = Input\nInput.default = Input\n\nif (terminalHighlight && terminalHighlight.registerInput) {\n  terminalHighlight.registerInput(Input)\n}\n"]},"metadata":{},"sourceType":"script"}