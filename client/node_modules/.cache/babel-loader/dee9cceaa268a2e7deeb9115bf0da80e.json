{"ast":null,"code":"/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst {\n  hasAttribute,\n  firstChildByTag,\n  nextNode\n} = require('../NodeUtils');\n\nclass RemoveCspNonce {\n  transform(tree) {\n    const html = firstChildByTag(tree, 'html');\n\n    if (!html) {\n      return;\n    }\n\n    let node = html;\n\n    while (node) {\n      if (node.tagName === 'script') {\n        if (hasAttribute(node, 'nonce')) {\n          delete node.attribs['nonce'];\n        }\n      }\n\n      node = nextNode(node);\n    }\n  }\n\n}\n\nmodule.exports = RemoveCspNonce;","map":{"version":3,"sources":["/Users/bruceseymour/ra-video/client/node_modules/@ampproject/toolbox-optimizer/lib/transformers/RemoveCspNonce.js"],"names":["hasAttribute","firstChildByTag","nextNode","require","RemoveCspNonce","transform","tree","html","node","tagName","attribs","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;AAACA,EAAAA,YAAD;AAAeC,EAAAA,eAAf;AAAgCC,EAAAA;AAAhC,IAA4CC,OAAO,CAAC,cAAD,CAAzD;;AAEA,MAAMC,cAAN,CAAqB;AACnBC,EAAAA,SAAS,CAACC,IAAD,EAAO;AACd,UAAMC,IAAI,GAAGN,eAAe,CAACK,IAAD,EAAO,MAAP,CAA5B;;AACA,QAAI,CAACC,IAAL,EAAW;AACT;AACD;;AACD,QAAIC,IAAI,GAAGD,IAAX;;AACA,WAAOC,IAAP,EAAa;AACX,UAAIA,IAAI,CAACC,OAAL,KAAiB,QAArB,EAA+B;AAC7B,YAAIT,YAAY,CAACQ,IAAD,EAAO,OAAP,CAAhB,EAAiC;AAC/B,iBAAOA,IAAI,CAACE,OAAL,CAAa,OAAb,CAAP;AACD;AACF;;AACDF,MAAAA,IAAI,GAAGN,QAAQ,CAACM,IAAD,CAAf;AACD;AACF;;AAfkB;;AAkBrBG,MAAM,CAACC,OAAP,GAAiBR,cAAjB","sourcesContent":["/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst {hasAttribute, firstChildByTag, nextNode} = require('../NodeUtils');\n\nclass RemoveCspNonce {\n  transform(tree) {\n    const html = firstChildByTag(tree, 'html');\n    if (!html) {\n      return;\n    }\n    let node = html;\n    while (node) {\n      if (node.tagName === 'script') {\n        if (hasAttribute(node, 'nonce')) {\n          delete node.attribs['nonce'];\n        }\n      }\n      node = nextNode(node);\n    }\n  }\n}\n\nmodule.exports = RemoveCspNonce;\n"]},"metadata":{},"sourceType":"script"}