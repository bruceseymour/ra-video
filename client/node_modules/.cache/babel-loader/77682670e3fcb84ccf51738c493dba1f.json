{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst webpack_1 = require(\"webpack\"); // Shared between webpack 4 and 5:\n\n\nfunction injectRefreshFunctions(compilation) {\n  const hookVars = compilation.mainTemplate.hooks.localVars;\n  hookVars.tap('ReactFreshWebpackPlugin', source => webpack_1.Template.asString([source, '', '// noop fns to prevent runtime errors during initialization', 'if (typeof self !== \"undefined\") {', webpack_1.Template.indent('self.$RefreshReg$ = function () {};'), webpack_1.Template.indent('self.$RefreshSig$ = function () {'), webpack_1.Template.indent(webpack_1.Template.indent('return function (type) {')), webpack_1.Template.indent(webpack_1.Template.indent(webpack_1.Template.indent('return type;'))), webpack_1.Template.indent(webpack_1.Template.indent('};')), webpack_1.Template.indent('};'), '}']));\n}\n\nfunction webpack4(compiler) {\n  // Webpack 4 does not have a method to handle interception of module\n  // execution.\n  // The closest thing we have to emulating this is mimicking the behavior of\n  // `strictModuleExceptionHandling` in `MainTemplate`:\n  // https://github.com/webpack/webpack/blob/4c644bf1f7cb067c748a52614500e0e2182b2700/lib/MainTemplate.js#L200\n  compiler.hooks.compilation.tap('ReactFreshWebpackPlugin', compilation => {\n    injectRefreshFunctions(compilation);\n    const hookRequire = compilation.mainTemplate.hooks.require; // @ts-ignore webpack 5 types compat\n\n    hookRequire.tap('ReactFreshWebpackPlugin', source => {\n      // Webpack 4 evaluates module code on the following line:\n      // ```\n      // modules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n      // ```\n      // https://github.com/webpack/webpack/blob/4c644bf1f7cb067c748a52614500e0e2182b2700/lib/MainTemplate.js#L200\n      const lines = source.split('\\n'); // @ts-ignore webpack 5 types compat\n\n      const evalIndex = lines.findIndex(l => l.includes('modules[moduleId].call(')); // Unable to find the module execution, that's OK:\n\n      if (evalIndex === -1) {\n        return source;\n      } // Legacy CSS implementations will `eval` browser code in a Node.js\n      // context to extract CSS. For backwards compatibility, we need to check\n      // we're in a browser context before continuing.\n\n\n      return webpack_1.Template.asString([...lines.slice(0, evalIndex), `\n        var hasRefresh = typeof self !== \"undefined\" && !!self.$RefreshInterceptModuleExecution$;\n        var cleanup = hasRefresh\n          ? self.$RefreshInterceptModuleExecution$(moduleId)\n          : function() {};\n        try {\n        `, lines[evalIndex], `\n        } finally {\n          cleanup();\n        }\n        `, ...lines.slice(evalIndex + 1)]);\n    });\n  });\n}\n\nfunction webpack5(compiler) {\n  class ReactRefreshRuntimeModule extends webpack_1.RuntimeModule {\n    constructor() {\n      super('react refresh', 5);\n    }\n\n    generate() {\n      // @ts-ignore This exists in webpack 5\n      const {\n        runtimeTemplate\n      } = this.compilation;\n      return webpack_1.Template.asString([`${webpack_1.RuntimeGlobals.interceptModuleExecution}.push(${runtimeTemplate.basicFunction('options', [`${runtimeTemplate.supportsConst() ? 'const' : 'var'} originalFactory = options.factory;`, `options.factory = ${runtimeTemplate.basicFunction('moduleObject, moduleExports, webpackRequire', [// Legacy CSS implementations will `eval` browser code in a Node.js\n      // context to extract CSS. For backwards compatibility, we need to check\n      // we're in a browser context before continuing.\n      `${runtimeTemplate.supportsConst() ? 'const' : 'var'} hasRefresh = typeof self !== \"undefined\" && !!self.$RefreshInterceptModuleExecution$;`, `${runtimeTemplate.supportsConst() ? 'const' : 'var'} cleanup = hasRefresh ? self.$RefreshInterceptModuleExecution$(moduleObject.id) : ${runtimeTemplate.supportsArrowFunction() ? '() => {}' : 'function() {}'};`, 'try {', webpack_1.Template.indent('originalFactory.call(this, moduleObject, moduleExports, webpackRequire);'), '} finally {', webpack_1.Template.indent(`cleanup();`), '}'])}`])})`]);\n    }\n\n  } // @ts-ignore webpack 5 types compat\n\n\n  compiler.hooks.compilation.tap('ReactFreshWebpackPlugin', compilation => {\n    injectRefreshFunctions(compilation); // @ts-ignore Exists in webpack 5\n\n    compilation.hooks.additionalTreeRuntimeRequirements.tap('ReactFreshWebpackPlugin', chunk => {\n      // @ts-ignore Exists in webpack 5\n      compilation.addRuntimeModule(chunk, new ReactRefreshRuntimeModule());\n    });\n  });\n}\n\nclass ReactFreshWebpackPlugin {\n  apply(compiler) {\n    const webpackMajorVersion = parseInt(webpack_1.version !== null && webpack_1.version !== void 0 ? webpack_1.version : '', 10);\n\n    switch (webpackMajorVersion) {\n      case 4:\n        {\n          webpack4(compiler);\n          break;\n        }\n\n      case 5:\n        {\n          webpack5(compiler);\n          break;\n        }\n\n      default:\n        {\n          throw new Error(`ReactFreshWebpackPlugin does not support webpack v${webpackMajorVersion}.`);\n        }\n    }\n  }\n\n}\n\nexports.default = ReactFreshWebpackPlugin;","map":{"version":3,"sources":["/Users/bruceseymour/ra-video/client/node_modules/@next/react-refresh-utils/ReactRefreshWebpackPlugin.js"],"names":["Object","defineProperty","exports","value","webpack_1","require","injectRefreshFunctions","compilation","hookVars","mainTemplate","hooks","localVars","tap","source","Template","asString","indent","webpack4","compiler","hookRequire","lines","split","evalIndex","findIndex","l","includes","slice","webpack5","ReactRefreshRuntimeModule","RuntimeModule","constructor","generate","runtimeTemplate","RuntimeGlobals","interceptModuleExecution","basicFunction","supportsConst","supportsArrowFunction","additionalTreeRuntimeRequirements","chunk","addRuntimeModule","ReactFreshWebpackPlugin","apply","webpackMajorVersion","parseInt","version","Error","default"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst webpack_1 = require(\"webpack\");\n// Shared between webpack 4 and 5:\nfunction injectRefreshFunctions(compilation) {\n    const hookVars = compilation.mainTemplate.hooks.localVars;\n    hookVars.tap('ReactFreshWebpackPlugin', (source) => webpack_1.Template.asString([\n        source,\n        '',\n        '// noop fns to prevent runtime errors during initialization',\n        'if (typeof self !== \"undefined\") {',\n        webpack_1.Template.indent('self.$RefreshReg$ = function () {};'),\n        webpack_1.Template.indent('self.$RefreshSig$ = function () {'),\n        webpack_1.Template.indent(webpack_1.Template.indent('return function (type) {')),\n        webpack_1.Template.indent(webpack_1.Template.indent(webpack_1.Template.indent('return type;'))),\n        webpack_1.Template.indent(webpack_1.Template.indent('};')),\n        webpack_1.Template.indent('};'),\n        '}',\n    ]));\n}\nfunction webpack4(compiler) {\n    // Webpack 4 does not have a method to handle interception of module\n    // execution.\n    // The closest thing we have to emulating this is mimicking the behavior of\n    // `strictModuleExceptionHandling` in `MainTemplate`:\n    // https://github.com/webpack/webpack/blob/4c644bf1f7cb067c748a52614500e0e2182b2700/lib/MainTemplate.js#L200\n    compiler.hooks.compilation.tap('ReactFreshWebpackPlugin', (compilation) => {\n        injectRefreshFunctions(compilation);\n        const hookRequire = compilation.mainTemplate.hooks.require;\n        // @ts-ignore webpack 5 types compat\n        hookRequire.tap('ReactFreshWebpackPlugin', (source) => {\n            // Webpack 4 evaluates module code on the following line:\n            // ```\n            // modules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n            // ```\n            // https://github.com/webpack/webpack/blob/4c644bf1f7cb067c748a52614500e0e2182b2700/lib/MainTemplate.js#L200\n            const lines = source.split('\\n');\n            // @ts-ignore webpack 5 types compat\n            const evalIndex = lines.findIndex((l) => l.includes('modules[moduleId].call('));\n            // Unable to find the module execution, that's OK:\n            if (evalIndex === -1) {\n                return source;\n            }\n            // Legacy CSS implementations will `eval` browser code in a Node.js\n            // context to extract CSS. For backwards compatibility, we need to check\n            // we're in a browser context before continuing.\n            return webpack_1.Template.asString([\n                ...lines.slice(0, evalIndex),\n                `\n        var hasRefresh = typeof self !== \"undefined\" && !!self.$RefreshInterceptModuleExecution$;\n        var cleanup = hasRefresh\n          ? self.$RefreshInterceptModuleExecution$(moduleId)\n          : function() {};\n        try {\n        `,\n                lines[evalIndex],\n                `\n        } finally {\n          cleanup();\n        }\n        `,\n                ...lines.slice(evalIndex + 1),\n            ]);\n        });\n    });\n}\nfunction webpack5(compiler) {\n    class ReactRefreshRuntimeModule extends webpack_1.RuntimeModule {\n        constructor() {\n            super('react refresh', 5);\n        }\n        generate() {\n            // @ts-ignore This exists in webpack 5\n            const { runtimeTemplate } = this.compilation;\n            return webpack_1.Template.asString([\n                `${webpack_1.RuntimeGlobals.interceptModuleExecution}.push(${runtimeTemplate.basicFunction('options', [\n                    `${runtimeTemplate.supportsConst() ? 'const' : 'var'} originalFactory = options.factory;`,\n                    `options.factory = ${runtimeTemplate.basicFunction('moduleObject, moduleExports, webpackRequire', [\n                        // Legacy CSS implementations will `eval` browser code in a Node.js\n                        // context to extract CSS. For backwards compatibility, we need to check\n                        // we're in a browser context before continuing.\n                        `${runtimeTemplate.supportsConst() ? 'const' : 'var'} hasRefresh = typeof self !== \"undefined\" && !!self.$RefreshInterceptModuleExecution$;`,\n                        `${runtimeTemplate.supportsConst() ? 'const' : 'var'} cleanup = hasRefresh ? self.$RefreshInterceptModuleExecution$(moduleObject.id) : ${runtimeTemplate.supportsArrowFunction()\n                            ? '() => {}'\n                            : 'function() {}'};`,\n                        'try {',\n                        webpack_1.Template.indent('originalFactory.call(this, moduleObject, moduleExports, webpackRequire);'),\n                        '} finally {',\n                        webpack_1.Template.indent(`cleanup();`),\n                        '}',\n                    ])}`,\n                ])})`,\n            ]);\n        }\n    }\n    // @ts-ignore webpack 5 types compat\n    compiler.hooks.compilation.tap('ReactFreshWebpackPlugin', (compilation) => {\n        injectRefreshFunctions(compilation);\n        // @ts-ignore Exists in webpack 5\n        compilation.hooks.additionalTreeRuntimeRequirements.tap('ReactFreshWebpackPlugin', (chunk) => {\n            // @ts-ignore Exists in webpack 5\n            compilation.addRuntimeModule(chunk, new ReactRefreshRuntimeModule());\n        });\n    });\n}\nclass ReactFreshWebpackPlugin {\n    apply(compiler) {\n        const webpackMajorVersion = parseInt(webpack_1.version !== null && webpack_1.version !== void 0 ? webpack_1.version : '', 10);\n        switch (webpackMajorVersion) {\n            case 4: {\n                webpack4(compiler);\n                break;\n            }\n            case 5: {\n                webpack5(compiler);\n                break;\n            }\n            default: {\n                throw new Error(`ReactFreshWebpackPlugin does not support webpack v${webpackMajorVersion}.`);\n            }\n        }\n    }\n}\nexports.default = ReactFreshWebpackPlugin;\n//# sourceMappingURL=ReactRefreshWebpackPlugin.js.map"]},"metadata":{},"sourceType":"script"}