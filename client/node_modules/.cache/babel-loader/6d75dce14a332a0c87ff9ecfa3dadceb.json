{"ast":null,"code":"/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst {\n  firstChildByTag,\n  createElement,\n  appendChild\n} = require('../NodeUtils');\n/**\n * AddAmpLink - adds a reference to the valid AMP\n * version of this document.\n *\n * This transformer supports the following parameter(s):\n *\n * * `ampUrl`: specifying an URL pointing to the valid AMP version of this document.\n */\n\n\nclass AddAmpLink {\n  transform(root, params) {\n    if (!params.ampUrl) return; // no AMP URL configured\n\n    const html = firstChildByTag(root, 'html');\n    if (!html) return;\n    const head = firstChildByTag(html, 'head');\n    if (!head) return;\n    const ampLink = createElement('link', {\n      rel: 'amphtml',\n      href: params.ampUrl\n    });\n    appendChild(head, ampLink);\n  }\n\n}\n\nmodule.exports = AddAmpLink;","map":{"version":3,"sources":["/Users/bruceseymour/ra-video/client/node_modules/@ampproject/toolbox-optimizer/lib/transformers/AddAmpLink.js"],"names":["firstChildByTag","createElement","appendChild","require","AddAmpLink","transform","root","params","ampUrl","html","head","ampLink","rel","href","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;AAACA,EAAAA,eAAD;AAAkBC,EAAAA,aAAlB;AAAiCC,EAAAA;AAAjC,IAAgDC,OAAO,CAAC,cAAD,CAA7D;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMC,UAAN,CAAiB;AACfC,EAAAA,SAAS,CAACC,IAAD,EAAOC,MAAP,EAAe;AACtB,QAAI,CAACA,MAAM,CAACC,MAAZ,EAAoB,OADE,CACM;;AAE5B,UAAMC,IAAI,GAAGT,eAAe,CAACM,IAAD,EAAO,MAAP,CAA5B;AACA,QAAI,CAACG,IAAL,EAAW;AACX,UAAMC,IAAI,GAAGV,eAAe,CAACS,IAAD,EAAO,MAAP,CAA5B;AACA,QAAI,CAACC,IAAL,EAAW;AAEX,UAAMC,OAAO,GAAGV,aAAa,CAAC,MAAD,EAAS;AACpCW,MAAAA,GAAG,EAAE,SAD+B;AAEpCC,MAAAA,IAAI,EAAEN,MAAM,CAACC;AAFuB,KAAT,CAA7B;AAKAN,IAAAA,WAAW,CAACQ,IAAD,EAAOC,OAAP,CAAX;AACD;;AAfc;;AAkBjBG,MAAM,CAACC,OAAP,GAAiBX,UAAjB","sourcesContent":["/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst {firstChildByTag, createElement, appendChild} = require('../NodeUtils');\n\n/**\n * AddAmpLink - adds a reference to the valid AMP\n * version of this document.\n *\n * This transformer supports the following parameter(s):\n *\n * * `ampUrl`: specifying an URL pointing to the valid AMP version of this document.\n */\nclass AddAmpLink {\n  transform(root, params) {\n    if (!params.ampUrl) return; // no AMP URL configured\n\n    const html = firstChildByTag(root, 'html');\n    if (!html) return;\n    const head = firstChildByTag(html, 'head');\n    if (!head) return;\n\n    const ampLink = createElement('link', {\n      rel: 'amphtml',\n      href: params.ampUrl,\n    });\n\n    appendChild(head, ampLink);\n  }\n}\n\nmodule.exports = AddAmpLink;\n"]},"metadata":{},"sourceType":"script"}