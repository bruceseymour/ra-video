{"ast":null,"code":"/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst loadRules = require('./lib/loadRules');\n\nconst AmpValidatorRules = require('./lib/AmpValidatorRules');\n\nlet cached = null;\n\nasync function fetch(opt = {}) {\n  if (!opt.noCache && cached) {\n    return cached;\n  }\n\n  let rules = opt.rules;\n\n  if (!rules) {\n    rules = await loadRules(opt);\n  }\n\n  cached = new AmpValidatorRules(rules);\n  return cached;\n}\n\nmodule.exports = {\n  fetch\n};","map":{"version":3,"sources":["/Users/bruceseymour/ra-video/client/node_modules/@ampproject/toolbox-validator-rules/index.js"],"names":["loadRules","require","AmpValidatorRules","cached","fetch","opt","noCache","rules","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,MAAMA,SAAS,GAAGC,OAAO,CAAC,iBAAD,CAAzB;;AACA,MAAMC,iBAAiB,GAAGD,OAAO,CAAC,yBAAD,CAAjC;;AAEA,IAAIE,MAAM,GAAG,IAAb;;AAEA,eAAeC,KAAf,CAAqBC,GAAG,GAAG,EAA3B,EAA+B;AAC7B,MAAI,CAACA,GAAG,CAACC,OAAL,IAAgBH,MAApB,EAA4B;AAC1B,WAAOA,MAAP;AACD;;AAED,MAAII,KAAK,GAAGF,GAAG,CAACE,KAAhB;;AAEA,MAAI,CAACA,KAAL,EAAY;AACVA,IAAAA,KAAK,GAAG,MAAMP,SAAS,CAACK,GAAD,CAAvB;AACD;;AAEDF,EAAAA,MAAM,GAAG,IAAID,iBAAJ,CAAsBK,KAAtB,CAAT;AACA,SAAOJ,MAAP;AACD;;AAEDK,MAAM,CAACC,OAAP,GAAiB;AAACL,EAAAA;AAAD,CAAjB","sourcesContent":["/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst loadRules = require('./lib/loadRules');\nconst AmpValidatorRules = require('./lib/AmpValidatorRules');\n\nlet cached = null;\n\nasync function fetch(opt = {}) {\n  if (!opt.noCache && cached) {\n    return cached;\n  }\n\n  let rules = opt.rules;\n\n  if (!rules) {\n    rules = await loadRules(opt);\n  }\n\n  cached = new AmpValidatorRules(rules);\n  return cached;\n}\n\nmodule.exports = {fetch};\n"]},"metadata":{},"sourceType":"script"}