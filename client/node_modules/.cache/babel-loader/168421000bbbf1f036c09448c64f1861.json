{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nexports.__esModule = true;\n\nvar anser_1 = __importDefault(require(\"anser\"));\n\nvar React = __importStar(require(\"react\"));\n\nvar strip_ansi_1 = __importDefault(require(\"strip-ansi\"));\n\nvar stack_frame_1 = require(\"../../helpers/stack-frame\");\n\nexports.CodeFrame = function CodeFrame(_a) {\n  var stackFrame = _a.stackFrame,\n      codeFrame = _a.codeFrame; // Strip leading spaces out of the code frame:\n\n  var formattedFrame = React.useMemo(function () {\n    var lines = codeFrame.split(/\\r?\\n/g);\n    var prefixLength = lines.map(function (line) {\n      return /^>? +\\d+ +\\| ( *)/.exec(strip_ansi_1[\"default\"](line));\n    }).filter(Boolean).map(function (v) {\n      return v.pop();\n    }).reduce(function (c, n) {\n      return isNaN(c) ? n.length : Math.min(c, n.length);\n    }, NaN);\n\n    if (prefixLength > 1) {\n      var p_1 = ' '.repeat(prefixLength);\n      return lines.map(function (line, a) {\n        return ~(a = line.indexOf('|')) ? line.substring(0, a) + line.substring(a).replace(p_1, '') : line;\n      }).join('\\n');\n    }\n\n    return lines.join('\\n');\n  }, [codeFrame]);\n  var decoded = React.useMemo(function () {\n    return anser_1[\"default\"].ansiToJson(formattedFrame, {\n      json: true,\n      use_classes: true,\n      remove_empty: true\n    });\n  }, [formattedFrame]);\n  var open = React.useCallback(function () {\n    var _a;\n\n    var params = new URLSearchParams();\n\n    for (var key in stackFrame) {\n      params.append(key, ((_a = stackFrame[key]) !== null && _a !== void 0 ? _a : '').toString());\n    }\n\n    self.fetch((process.env.__NEXT_ROUTER_BASEPATH || '') + \"/__nextjs_launch-editor?\" + params.toString()).then(function () {}, function () {// TODO: report error\n    });\n  }, [stackFrame]); // TODO: make the caret absolute\n\n  return React.createElement(\"div\", {\n    \"data-nextjs-codeframe\": true\n  }, React.createElement(\"p\", {\n    role: \"link\",\n    onClick: open,\n    tabIndex: 1,\n    title: \"Click to open in your editor\"\n  }, React.createElement(\"span\", null, stack_frame_1.getFrameSource(stackFrame), \" @ \", stackFrame.methodName), React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, React.createElement(\"path\", {\n    d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"\n  }), React.createElement(\"polyline\", {\n    points: \"15 3 21 3 21 9\"\n  }), React.createElement(\"line\", {\n    x1: \"10\",\n    y1: \"14\",\n    x2: \"21\",\n    y2: \"3\"\n  }))), React.createElement(\"hr\", null), React.createElement(\"pre\", null, decoded.map(function (entry, index) {\n    return React.createElement(\"span\", {\n      key: \"frame-\" + index,\n      style: __assign({\n        color: entry.fg ? \"var(--color-\" + entry.fg + \")\" : undefined\n      }, entry.decoration === 'bold' ? {\n        fontWeight: 800\n      } : entry.decoration === 'italic' ? {\n        fontStyle: 'italic'\n      } : undefined)\n    }, entry.content);\n  })));\n};","map":{"version":3,"sources":["../../../../src/internal/components/CodeFrame/CodeFrame.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nexports.__esModule = true;\nvar anser_1 = __importDefault(require(\"anser\"));\nvar React = __importStar(require(\"react\"));\nvar strip_ansi_1 = __importDefault(require(\"strip-ansi\"));\nvar stack_frame_1 = require(\"../../helpers/stack-frame\");\nexports.CodeFrame = function CodeFrame(_a) {\n    var stackFrame = _a.stackFrame, codeFrame = _a.codeFrame;\n    // Strip leading spaces out of the code frame:\n    var formattedFrame = React.useMemo(function () {\n        var lines = codeFrame.split(/\\r?\\n/g);\n        var prefixLength = lines\n            .map(function (line) { return /^>? +\\d+ +\\| ( *)/.exec(strip_ansi_1[\"default\"](line)); })\n            .filter(Boolean)\n            .map(function (v) { return v.pop(); })\n            .reduce(function (c, n) { return (isNaN(c) ? n.length : Math.min(c, n.length)); }, NaN);\n        if (prefixLength > 1) {\n            var p_1 = ' '.repeat(prefixLength);\n            return lines\n                .map(function (line, a) {\n                return ~(a = line.indexOf('|'))\n                    ? line.substring(0, a) + line.substring(a).replace(p_1, '')\n                    : line;\n            })\n                .join('\\n');\n        }\n        return lines.join('\\n');\n    }, [codeFrame]);\n    var decoded = React.useMemo(function () {\n        return anser_1[\"default\"].ansiToJson(formattedFrame, {\n            json: true,\n            use_classes: true,\n            remove_empty: true\n        });\n    }, [formattedFrame]);\n    var open = React.useCallback(function () {\n        var _a;\n        var params = new URLSearchParams();\n        for (var key in stackFrame) {\n            params.append(key, ((_a = stackFrame[key]) !== null && _a !== void 0 ? _a : '').toString());\n        }\n        self\n            .fetch((process.env.__NEXT_ROUTER_BASEPATH || '') + \"/__nextjs_launch-editor?\" + params.toString())\n            .then(function () { }, function () {\n            // TODO: report error\n        });\n    }, [stackFrame]);\n    // TODO: make the caret absolute\n    return (React.createElement(\"div\", { \"data-nextjs-codeframe\": true },\n        React.createElement(\"p\", { role: \"link\", onClick: open, tabIndex: 1, title: \"Click to open in your editor\" },\n            React.createElement(\"span\", null,\n                stack_frame_1.getFrameSource(stackFrame),\n                \" @ \",\n                stackFrame.methodName),\n            React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", fill: \"none\", stroke: \"currentColor\", strokeWidth: \"2\", strokeLinecap: \"round\", strokeLinejoin: \"round\" },\n                React.createElement(\"path\", { d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\" }),\n                React.createElement(\"polyline\", { points: \"15 3 21 3 21 9\" }),\n                React.createElement(\"line\", { x1: \"10\", y1: \"14\", x2: \"21\", y2: \"3\" }))),\n        React.createElement(\"hr\", null),\n        React.createElement(\"pre\", null, decoded.map(function (entry, index) { return (React.createElement(\"span\", { key: \"frame-\" + index, style: __assign({ color: entry.fg ? \"var(--color-\" + entry.fg + \")\" : undefined }, (entry.decoration === 'bold'\n                ? { fontWeight: 800 }\n                : entry.decoration === 'italic'\n                    ? { fontStyle: 'italic' }\n                    : undefined)) }, entry.content)); }))));\n};\n//# sourceMappingURL=CodeFrame.js.map"]},"metadata":{},"sourceType":"script"}