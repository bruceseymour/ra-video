{"ast":null,"code":"\"use strict\";\n/* eslint-env browser, es6, node */\n\nimport { defaults, map_from_object, map_to_object, HOP } from \"./utils/index.js\";\nimport { AST_Toplevel } from \"./ast.js\";\nimport { parse } from \"./parse.js\";\nimport { OutputStream } from \"./output.js\";\nimport { Compressor } from \"./compress/index.js\";\nimport { base54 } from \"./scope.js\";\nimport { SourceMap } from \"./sourcemap.js\";\nimport { mangle_properties, reserve_quoted_keys } from \"./propmangle.js\";\nvar to_ascii = typeof atob == \"undefined\" ? function (b64) {\n  return Buffer.from(b64, \"base64\").toString();\n} : atob;\nvar to_base64 = typeof btoa == \"undefined\" ? function (str) {\n  return Buffer.from(str).toString(\"base64\");\n} : btoa;\n\nfunction read_source_map(code) {\n  var match = /(?:^|[^.])\\/\\/# sourceMappingURL=data:application\\/json(;[\\w=-]*)?;base64,([+/0-9A-Za-z]*=*)\\s*$/.exec(code);\n\n  if (!match) {\n    console.warn(\"inline source map not found\");\n    return null;\n  }\n\n  return to_ascii(match[2]);\n}\n\nfunction set_shorthand(name, options, keys) {\n  if (options[name]) {\n    keys.forEach(function (key) {\n      if (options[key]) {\n        if (typeof options[key] != \"object\") options[key] = {};\n        if (!(name in options[key])) options[key][name] = options[name];\n      }\n    });\n  }\n}\n\nfunction init_cache(cache) {\n  if (!cache) return;\n\n  if (!(\"props\" in cache)) {\n    cache.props = new Map();\n  } else if (!(cache.props instanceof Map)) {\n    cache.props = map_from_object(cache.props);\n  }\n}\n\nfunction cache_to_json(cache) {\n  return {\n    props: map_to_object(cache.props)\n  };\n}\n\nasync function minify(files, options) {\n  options = defaults(options, {\n    compress: {},\n    ecma: undefined,\n    enclose: false,\n    ie8: false,\n    keep_classnames: undefined,\n    keep_fnames: false,\n    mangle: {},\n    module: false,\n    nameCache: null,\n    output: null,\n    format: null,\n    parse: {},\n    rename: undefined,\n    safari10: false,\n    sourceMap: false,\n    timings: false,\n    toplevel: false,\n    warnings: false,\n    wrap: false\n  }, true);\n  var timings = options.timings && {\n    start: Date.now()\n  };\n\n  if (options.keep_classnames === undefined) {\n    options.keep_classnames = options.keep_fnames;\n  }\n\n  if (options.rename === undefined) {\n    options.rename = options.compress && options.mangle;\n  }\n\n  if (options.output && options.format) {\n    throw new Error(\"Please only specify either output or format option, preferrably format.\");\n  }\n\n  options.format = options.format || options.output || {};\n  set_shorthand(\"ecma\", options, [\"parse\", \"compress\", \"format\"]);\n  set_shorthand(\"ie8\", options, [\"compress\", \"mangle\", \"format\"]);\n  set_shorthand(\"keep_classnames\", options, [\"compress\", \"mangle\"]);\n  set_shorthand(\"keep_fnames\", options, [\"compress\", \"mangle\"]);\n  set_shorthand(\"module\", options, [\"parse\", \"compress\", \"mangle\"]);\n  set_shorthand(\"safari10\", options, [\"mangle\", \"format\"]);\n  set_shorthand(\"toplevel\", options, [\"compress\", \"mangle\"]);\n  set_shorthand(\"warnings\", options, [\"compress\"]); // legacy\n\n  var quoted_props;\n\n  if (options.mangle) {\n    options.mangle = defaults(options.mangle, {\n      cache: options.nameCache && (options.nameCache.vars || {}),\n      eval: false,\n      ie8: false,\n      keep_classnames: false,\n      keep_fnames: false,\n      module: false,\n      properties: false,\n      reserved: [],\n      safari10: false,\n      toplevel: false\n    }, true);\n\n    if (options.mangle.properties) {\n      if (typeof options.mangle.properties != \"object\") {\n        options.mangle.properties = {};\n      }\n\n      if (options.mangle.properties.keep_quoted) {\n        quoted_props = options.mangle.properties.reserved;\n        if (!Array.isArray(quoted_props)) quoted_props = [];\n        options.mangle.properties.reserved = quoted_props;\n      }\n\n      if (options.nameCache && !(\"cache\" in options.mangle.properties)) {\n        options.mangle.properties.cache = options.nameCache.props || {};\n      }\n    }\n\n    init_cache(options.mangle.cache);\n    init_cache(options.mangle.properties.cache);\n  }\n\n  if (options.sourceMap) {\n    options.sourceMap = defaults(options.sourceMap, {\n      asObject: false,\n      content: null,\n      filename: null,\n      includeSources: false,\n      root: null,\n      url: null\n    }, true);\n  }\n\n  if (timings) timings.parse = Date.now();\n  var toplevel;\n\n  if (files instanceof AST_Toplevel) {\n    toplevel = files;\n  } else {\n    if (typeof files == \"string\") {\n      files = [files];\n    }\n\n    options.parse = options.parse || {};\n    options.parse.toplevel = null;\n\n    for (var name in files) if (HOP(files, name)) {\n      options.parse.filename = name;\n      options.parse.toplevel = parse(files[name], options.parse);\n\n      if (options.sourceMap && options.sourceMap.content == \"inline\") {\n        if (Object.keys(files).length > 1) throw new Error(\"inline source map only works with singular input\");\n        options.sourceMap.content = read_source_map(files[name]);\n      }\n    }\n\n    toplevel = options.parse.toplevel;\n  }\n\n  if (quoted_props && options.mangle.properties.keep_quoted !== \"strict\") {\n    reserve_quoted_keys(toplevel, quoted_props);\n  }\n\n  if (options.wrap) {\n    toplevel = toplevel.wrap_commonjs(options.wrap);\n  }\n\n  if (options.enclose) {\n    toplevel = toplevel.wrap_enclose(options.enclose);\n  }\n\n  if (timings) timings.rename = Date.now(); // disable rename on harmony due to expand_names bug in for-of loops\n  // https://github.com/mishoo/UglifyJS2/issues/2794\n\n  if (0 && options.rename) {\n    toplevel.figure_out_scope(options.mangle);\n    toplevel.expand_names(options.mangle);\n  }\n\n  if (timings) timings.compress = Date.now();\n\n  if (options.compress) {\n    toplevel = new Compressor(options.compress, {\n      mangle_options: options.mangle\n    }).compress(toplevel);\n  }\n\n  if (timings) timings.scope = Date.now();\n  if (options.mangle) toplevel.figure_out_scope(options.mangle);\n  if (timings) timings.mangle = Date.now();\n\n  if (options.mangle) {\n    base54.reset();\n    toplevel.compute_char_frequency(options.mangle);\n    toplevel.mangle_names(options.mangle);\n  }\n\n  if (timings) timings.properties = Date.now();\n\n  if (options.mangle && options.mangle.properties) {\n    toplevel = mangle_properties(toplevel, options.mangle.properties);\n  }\n\n  if (timings) timings.format = Date.now();\n  var result = {};\n\n  if (options.format.ast) {\n    result.ast = toplevel;\n  }\n\n  if (!HOP(options.format, \"code\") || options.format.code) {\n    if (options.sourceMap) {\n      options.format.source_map = await SourceMap({\n        file: options.sourceMap.filename,\n        orig: options.sourceMap.content,\n        root: options.sourceMap.root\n      });\n\n      if (options.sourceMap.includeSources) {\n        if (files instanceof AST_Toplevel) {\n          throw new Error(\"original source content unavailable\");\n        } else for (var name in files) if (HOP(files, name)) {\n          options.format.source_map.get().setSourceContent(name, files[name]);\n        }\n      }\n    }\n\n    delete options.format.ast;\n    delete options.format.code;\n    var stream = OutputStream(options.format);\n    toplevel.print(stream);\n    result.code = stream.get();\n\n    if (options.sourceMap) {\n      if (options.sourceMap.asObject) {\n        result.map = options.format.source_map.get().toJSON();\n      } else {\n        result.map = options.format.source_map.toString();\n      }\n\n      if (options.sourceMap.url == \"inline\") {\n        var sourceMap = typeof result.map === \"object\" ? JSON.stringify(result.map) : result.map;\n        result.code += \"\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,\" + to_base64(sourceMap);\n      } else if (options.sourceMap.url) {\n        result.code += \"\\n//# sourceMappingURL=\" + options.sourceMap.url;\n      }\n    }\n  }\n\n  if (options.nameCache && options.mangle) {\n    if (options.mangle.cache) options.nameCache.vars = cache_to_json(options.mangle.cache);\n\n    if (options.mangle.properties && options.mangle.properties.cache) {\n      options.nameCache.props = cache_to_json(options.mangle.properties.cache);\n    }\n  }\n\n  if (options.format && options.format.source_map) {\n    options.format.source_map.destroy();\n  }\n\n  if (timings) {\n    timings.end = Date.now();\n    result.timings = {\n      parse: 1e-3 * (timings.rename - timings.parse),\n      rename: 1e-3 * (timings.compress - timings.rename),\n      compress: 1e-3 * (timings.scope - timings.compress),\n      scope: 1e-3 * (timings.mangle - timings.scope),\n      mangle: 1e-3 * (timings.properties - timings.mangle),\n      properties: 1e-3 * (timings.format - timings.properties),\n      format: 1e-3 * (timings.end - timings.format),\n      total: 1e-3 * (timings.end - timings.start)\n    };\n  }\n\n  return result;\n}\n\nexport { minify, to_ascii };","map":{"version":3,"sources":["/Users/bruceseymour/ra-video/client/node_modules/@ampproject/toolbox-optimizer/node_modules/terser/lib/minify.js"],"names":["defaults","map_from_object","map_to_object","HOP","AST_Toplevel","parse","OutputStream","Compressor","base54","SourceMap","mangle_properties","reserve_quoted_keys","to_ascii","atob","b64","Buffer","from","toString","to_base64","btoa","str","read_source_map","code","match","exec","console","warn","set_shorthand","name","options","keys","forEach","key","init_cache","cache","props","Map","cache_to_json","minify","files","compress","ecma","undefined","enclose","ie8","keep_classnames","keep_fnames","mangle","module","nameCache","output","format","rename","safari10","sourceMap","timings","toplevel","warnings","wrap","start","Date","now","Error","quoted_props","vars","eval","properties","reserved","keep_quoted","Array","isArray","asObject","content","filename","includeSources","root","url","Object","length","wrap_commonjs","wrap_enclose","figure_out_scope","expand_names","mangle_options","scope","reset","compute_char_frequency","mangle_names","result","ast","source_map","file","orig","get","setSourceContent","stream","print","map","toJSON","JSON","stringify","destroy","end","total"],"mappings":"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","sourcesContent":["\"use strict\";\n/* eslint-env browser, es6, node */\n\nimport {\n    defaults,\n    map_from_object,\n    map_to_object,\n    HOP,\n} from \"./utils/index.js\";\nimport { AST_Toplevel } from \"./ast.js\";\nimport { parse } from \"./parse.js\";\nimport { OutputStream } from \"./output.js\";\nimport { Compressor } from \"./compress/index.js\";\nimport { base54 } from \"./scope.js\";\nimport { SourceMap } from \"./sourcemap.js\";\nimport {\n    mangle_properties,\n    reserve_quoted_keys,\n} from \"./propmangle.js\";\n\nvar to_ascii = typeof atob == \"undefined\" ? function(b64) {\n    return Buffer.from(b64, \"base64\").toString();\n} : atob;\nvar to_base64 = typeof btoa == \"undefined\" ? function(str) {\n    return Buffer.from(str).toString(\"base64\");\n} : btoa;\n\nfunction read_source_map(code) {\n    var match = /(?:^|[^.])\\/\\/# sourceMappingURL=data:application\\/json(;[\\w=-]*)?;base64,([+/0-9A-Za-z]*=*)\\s*$/.exec(code);\n    if (!match) {\n        console.warn(\"inline source map not found\");\n        return null;\n    }\n    return to_ascii(match[2]);\n}\n\nfunction set_shorthand(name, options, keys) {\n    if (options[name]) {\n        keys.forEach(function(key) {\n            if (options[key]) {\n                if (typeof options[key] != \"object\") options[key] = {};\n                if (!(name in options[key])) options[key][name] = options[name];\n            }\n        });\n    }\n}\n\nfunction init_cache(cache) {\n    if (!cache) return;\n    if (!(\"props\" in cache)) {\n        cache.props = new Map();\n    } else if (!(cache.props instanceof Map)) {\n        cache.props = map_from_object(cache.props);\n    }\n}\n\nfunction cache_to_json(cache) {\n    return {\n        props: map_to_object(cache.props)\n    };\n}\n\nasync function minify(files, options) {\n    options = defaults(options, {\n        compress: {},\n        ecma: undefined,\n        enclose: false,\n        ie8: false,\n        keep_classnames: undefined,\n        keep_fnames: false,\n        mangle: {},\n        module: false,\n        nameCache: null,\n        output: null,\n        format: null,\n        parse: {},\n        rename: undefined,\n        safari10: false,\n        sourceMap: false,\n        timings: false,\n        toplevel: false,\n        warnings: false,\n        wrap: false,\n    }, true);\n    var timings = options.timings && {\n        start: Date.now()\n    };\n    if (options.keep_classnames === undefined) {\n        options.keep_classnames = options.keep_fnames;\n    }\n    if (options.rename === undefined) {\n        options.rename = options.compress && options.mangle;\n    }\n    if (options.output && options.format) {\n        throw new Error(\"Please only specify either output or format option, preferrably format.\");\n    }\n    options.format = options.format || options.output || {};\n    set_shorthand(\"ecma\", options, [ \"parse\", \"compress\", \"format\" ]);\n    set_shorthand(\"ie8\", options, [ \"compress\", \"mangle\", \"format\" ]);\n    set_shorthand(\"keep_classnames\", options, [ \"compress\", \"mangle\" ]);\n    set_shorthand(\"keep_fnames\", options, [ \"compress\", \"mangle\" ]);\n    set_shorthand(\"module\", options, [ \"parse\", \"compress\", \"mangle\" ]);\n    set_shorthand(\"safari10\", options, [ \"mangle\", \"format\" ]);\n    set_shorthand(\"toplevel\", options, [ \"compress\", \"mangle\" ]);\n    set_shorthand(\"warnings\", options, [ \"compress\" ]); // legacy\n    var quoted_props;\n    if (options.mangle) {\n        options.mangle = defaults(options.mangle, {\n            cache: options.nameCache && (options.nameCache.vars || {}),\n            eval: false,\n            ie8: false,\n            keep_classnames: false,\n            keep_fnames: false,\n            module: false,\n            properties: false,\n            reserved: [],\n            safari10: false,\n            toplevel: false,\n        }, true);\n        if (options.mangle.properties) {\n            if (typeof options.mangle.properties != \"object\") {\n                options.mangle.properties = {};\n            }\n            if (options.mangle.properties.keep_quoted) {\n                quoted_props = options.mangle.properties.reserved;\n                if (!Array.isArray(quoted_props)) quoted_props = [];\n                options.mangle.properties.reserved = quoted_props;\n            }\n            if (options.nameCache && !(\"cache\" in options.mangle.properties)) {\n                options.mangle.properties.cache = options.nameCache.props || {};\n            }\n        }\n        init_cache(options.mangle.cache);\n        init_cache(options.mangle.properties.cache);\n    }\n    if (options.sourceMap) {\n        options.sourceMap = defaults(options.sourceMap, {\n            asObject: false,\n            content: null,\n            filename: null,\n            includeSources: false,\n            root: null,\n            url: null,\n        }, true);\n    }\n    if (timings) timings.parse = Date.now();\n    var toplevel;\n    if (files instanceof AST_Toplevel) {\n        toplevel = files;\n    } else {\n        if (typeof files == \"string\") {\n            files = [ files ];\n        }\n        options.parse = options.parse || {};\n        options.parse.toplevel = null;\n        for (var name in files) if (HOP(files, name)) {\n            options.parse.filename = name;\n            options.parse.toplevel = parse(files[name], options.parse);\n            if (options.sourceMap && options.sourceMap.content == \"inline\") {\n                if (Object.keys(files).length > 1)\n                    throw new Error(\"inline source map only works with singular input\");\n                options.sourceMap.content = read_source_map(files[name]);\n            }\n        }\n        toplevel = options.parse.toplevel;\n    }\n    if (quoted_props && options.mangle.properties.keep_quoted !== \"strict\") {\n        reserve_quoted_keys(toplevel, quoted_props);\n    }\n    if (options.wrap) {\n        toplevel = toplevel.wrap_commonjs(options.wrap);\n    }\n    if (options.enclose) {\n        toplevel = toplevel.wrap_enclose(options.enclose);\n    }\n    if (timings) timings.rename = Date.now();\n    // disable rename on harmony due to expand_names bug in for-of loops\n    // https://github.com/mishoo/UglifyJS2/issues/2794\n    if (0 && options.rename) {\n        toplevel.figure_out_scope(options.mangle);\n        toplevel.expand_names(options.mangle);\n    }\n    if (timings) timings.compress = Date.now();\n    if (options.compress) {\n        toplevel = new Compressor(options.compress, {\n            mangle_options: options.mangle\n        }).compress(toplevel);\n    }\n    if (timings) timings.scope = Date.now();\n    if (options.mangle) toplevel.figure_out_scope(options.mangle);\n    if (timings) timings.mangle = Date.now();\n    if (options.mangle) {\n        base54.reset();\n        toplevel.compute_char_frequency(options.mangle);\n        toplevel.mangle_names(options.mangle);\n    }\n    if (timings) timings.properties = Date.now();\n    if (options.mangle && options.mangle.properties) {\n        toplevel = mangle_properties(toplevel, options.mangle.properties);\n    }\n    if (timings) timings.format = Date.now();\n    var result = {};\n    if (options.format.ast) {\n        result.ast = toplevel;\n    }\n    if (!HOP(options.format, \"code\") || options.format.code) {\n        if (options.sourceMap) {\n            options.format.source_map = await SourceMap({\n                file: options.sourceMap.filename,\n                orig: options.sourceMap.content,\n                root: options.sourceMap.root\n            });\n            if (options.sourceMap.includeSources) {\n                if (files instanceof AST_Toplevel) {\n                    throw new Error(\"original source content unavailable\");\n                } else for (var name in files) if (HOP(files, name)) {\n                    options.format.source_map.get().setSourceContent(name, files[name]);\n                }\n            }\n        }\n        delete options.format.ast;\n        delete options.format.code;\n        var stream = OutputStream(options.format);\n        toplevel.print(stream);\n        result.code = stream.get();\n        if (options.sourceMap) {\n            if(options.sourceMap.asObject) {\n                result.map = options.format.source_map.get().toJSON();\n            } else {\n                result.map = options.format.source_map.toString();\n            }\n            if (options.sourceMap.url == \"inline\") {\n                var sourceMap = typeof result.map === \"object\" ? JSON.stringify(result.map) : result.map;\n                result.code += \"\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,\" + to_base64(sourceMap);\n            } else if (options.sourceMap.url) {\n                result.code += \"\\n//# sourceMappingURL=\" + options.sourceMap.url;\n            }\n        }\n    }\n    if (options.nameCache && options.mangle) {\n        if (options.mangle.cache) options.nameCache.vars = cache_to_json(options.mangle.cache);\n        if (options.mangle.properties && options.mangle.properties.cache) {\n            options.nameCache.props = cache_to_json(options.mangle.properties.cache);\n        }\n    }\n    if (options.format && options.format.source_map) {\n        options.format.source_map.destroy();\n    }\n    if (timings) {\n        timings.end = Date.now();\n        result.timings = {\n            parse: 1e-3 * (timings.rename - timings.parse),\n            rename: 1e-3 * (timings.compress - timings.rename),\n            compress: 1e-3 * (timings.scope - timings.compress),\n            scope: 1e-3 * (timings.mangle - timings.scope),\n            mangle: 1e-3 * (timings.properties - timings.mangle),\n            properties: 1e-3 * (timings.format - timings.properties),\n            format: 1e-3 * (timings.end - timings.format),\n            total: 1e-3 * (timings.end - timings.start)\n        };\n    }\n    return result;\n}\n\nexport {\n  minify,\n  to_ascii,\n};\n"]},"metadata":{},"sourceType":"module"}